function closePanels(){$(".sg-acc-panel").each(function(){$(this).hasClass("active")&&$(this).toggleClass("active")});$(".sg-acc-handle").each(function(){$(this).hasClass("active")&&$(this).toggleClass("active")})}function receiveIframeMessage(e){if(window.location.protocol!="file:"&&e.origin!==window.location.protocol+"//"+window.location.host)return;if(e.data.bodyclick!=undefined)closePanels();else if(e.data.patternpartial!=undefined){if(!urlHandler.skipBack){(history.state==null||history.state.pattern!=e.data.patternpartial)&&urlHandler.pushPattern(e.data.patternpartial,e.data.path);if(wsnConnected){var t=urlHandler.getFileName(e.data.patternpartial);wsn.send('{"url": "'+t+'", "patternpartial": "'+e.data.patternpartial+'" }')}}console.log(e.data.lineage);urlHandler.skipBack=!1}}(function(e){function v(){w(x(r,t))}function m(){p=!1;clearInterval(h);h=!1}function g(){p=!0;h=setInterval(v,800)}function y(){var e=o.width();d=!1;o.removeClass("hay-mode");$("#sg-gen-container").removeClass("hay-mode");w(Math.floor(e))}function b(){d=!0;$("#sg-gen-container").removeClass("vp-animate").width(r+s);o.removeClass("vp-animate").width(r);var e=window.setTimeout(function(){$("#sg-gen-container").addClass("hay-mode").width(i+s);o.addClass("hay-mode").width(i);setInterval(function(){var e=o.width();S(e)},100)},200)}function w(e,t){var n;e>i?n=i:e<r?n=r:n=e;t==0?$("#sg-gen-container,#sg-viewport").removeClass("vp-animate"):$("#sg-gen-container,#sg-viewport").addClass("vp-animate");$("#sg-gen-container").width(n+s);o.width(n);S(n);E(n)}function E(e){DataSaver.findValue("vpWidth")?DataSaver.updateValue("vpWidth",e):DataSaver.addValue("vpWidth",e)}function S(e,t,n){if(t=="em"){emSize=e;pxSize=Math.floor(e*f)}else{pxSize=e;emSize=e/f}if(n=="updatePxInput")u.val(pxSize);else if(n=="updateEmInput")a.val(emSize.toFixed(2));else{a.val(emSize.toFixed(2));u.val(pxSize)}}function x(e,t){return Math.random()*(t-e)+e}function T(e){$("#sg-viewport").width(e);$("#sg-gen-container").width(e*1+14);S(e)}var t=document.body.clientWidth,n=document.body.clientHeight,r=240,i=2600,s=14,o=$("#sg-viewport"),u=$(".sg-size-px"),a=$(".sg-size-em"),f=parseInt($("body").css("font-size")),l=Object,c=Object,h=!1,p=!1,d=!1;$(e).resize(function(){t=document.body.clientWidth;n=document.body.clientHeight});$(".sg-acc-handle").on("click",function(e){var t=$(this),n=t.next(".sg-acc-panel");e.preventDefault();t.toggleClass("active");n.toggleClass("active")});$(".sg-nav-toggle").on("click",function(e){e.preventDefault();$(".sg-nav-container").toggleClass("active")});$("#sg-t-toggle").on("click",function(e){e.preventDefault();$(this).parents("ul").toggleClass("active")});$("#sg-size-toggle").on("click",function(e){e.preventDefault();$(this).parents("ul").toggleClass("active")});$(".sg-size[data-size]").on("click",function(e){e.preventDefault();m();y();var t=$(this).attr("data-size");t.indexOf("px")>-1&&(f=1);t=t.replace(/[^\d.-]/g,"");w(Math.floor(t*f))});$("#sg-size-s").on("click",function(e){e.preventDefault();m();y();w(x(r,500))});$("#sg-size-m").on("click",function(e){e.preventDefault();m();y();w(x(500,800))});$("#sg-size-l").on("click",function(e){e.preventDefault();m();y();w(x(800,1200))});$("#sg-size-full").on("click",function(e){e.preventDefault();m();y();w(t)});$("#sg-size-random").on("click",function(e){e.preventDefault();m();y();w(x(r,t))});$("#sg-size-disco").on("click",function(e){e.preventDefault();y();p?m():g()});$("#sg-size-hay").on("click",function(e){e.preventDefault();m();d?y():b()});u.on("keydown",function(e){var t=Math.floor($(this).val());if(e.keyCode==38){t++;w(t,!1)}else if(e.keyCode==40){t--;w(t,!1)}else if(e.keyCode==13){e.preventDefault();w(t);$(this).blur()}});u.on("keyup",function(e){var t=Math.floor($(this).val());S(t,"px","updateEmInput")});a.on("keydown",function(e){var t=parseFloat($(this).val());if(e.keyCode==38){t++;w(Math.floor(t*f),!1)}else if(e.keyCode==40){t--;w(Math.floor(t*f),!1)}else if(e.keyCode==13){e.preventDefault();w(Math.floor(t*f))}});a.on("keyup",function(e){var t=parseFloat($(this).val());S(t,"em","updatePxInput")});$("#sg-mq a").on("click",function(e){e.preventDefault();var t=$(this).html(),n=t.indexOf("px")!=-1?"px":"em";t=t.replace(n,"");var r=n=="px"?t*1:t*f;w(r,!0)});$("#sg-rightpull").mousedown(function(e){var t=e.clientX,n=o.width();$("#sg-cover").css("display","block");$("#sg-cover").mousemove(function(e){viewportWidth=t>e.clientX?n-(t-e.clientX)*2:n+(e.clientX-t)*2;if(viewportWidth>r){DataSaver.findValue("vpWidth")?DataSaver.updateValue("vpWidth",viewportWidth):DataSaver.addValue("vpWidth",viewportWidth);w(viewportWidth,!1)}})});$("body").mouseup(function(e){$("#sg-cover").unbind("mousemove");$("#sg-cover").css("display","none")});var N=$("#sg-viewport").width();$("#sg-gen-container").width(N);$("#sg-viewport").width(N-14);S($("#sg-viewport").width());var C=urlHandler.getRequestVars(),k=0,L=!0;if(C.h!=undefined||C.hay!=undefined)b();else if(C.d!=undefined||C.disco!=undefined)g();else if(C.w!=undefined||C.width!=undefined){k=C.w!=undefined?C.w:C.width;k=k.indexOf("em")!=-1?Math.floor(Math.floor(k.replace("em",""))*f):Math.floor(k.replace("px",""));DataSaver.updateValue("vpWidth",k);T(k)}else L&&(k=DataSaver.findValue("vpWidth"))&&T(k);var A="all",O="",M=window.location.protocol+"//"+window.location.host+window.location.pathname.replace("index.html","")+"styleguide/html/styleguide.html";if(C.p!=undefined||C.pattern!=undefined){A=C.p!=undefined?C.p:C.pattern;O=urlHandler.getFileName(A);M=O!=""?window.location.protocol+"//"+window.location.host+window.location.pathname.replace("index.html","")+O:M}if(A!="all"){document.getElementById("title").innerHTML="Pattern Lab - "+A;history.replaceState({pattern:A},null,null)}document.getElementById("sg-raw").setAttribute("href",urlHandler.getFileName(A));urlHandler.skipBack=!0;document.getElementById("sg-viewport").contentWindow.location.replace(M);o.load(function(){function r(){n.each(function(e){$this=$(this),$thisHTML=$this.html().replace(/[<>]/g,function(e){return{"<":"&lt;",">":"&gt;"}[e]}),$codeWrapper=$('<div class="sg-code"><div class="sg-code-contains">This pattern contains: <code>atoms-logo</code> <code>molecule-primary-nav</code> <code>molecule-search-form</code></div><h3 class="sg-code-head">HTML</h3><pre class="sg-code-html"></pre><h3 class="sg-code-head">CSS</h3><pre class="sg-code-css"></pre></div>'),$htmlCode=$("<code></code>").html($thisHTML),$cssCode=$("<code></code>").html("CSS goes here");$codeWrapper.find(".sg-code-html").html($htmlCode);$codeWrapper.find(".sg-code-css").html($cssCode);$codeWrapper.appendTo($this)});t.find(".sg-code").show()}var e=o.attr("src"),t=o.contents(),n=t.find(".sg-pattern-body");$("#sg-t-code").click(function(e){var n=t.find(".sg-code");e.preventDefault();$(this).toggleClass("active");t.find(".sg-code").length==0?r():n.toggle()})})})(this);$(".sg-nav a").not(".sg-acc-handle").on("click",function(e){e.preventDefault();document.getElementById("sg-viewport").contentWindow.postMessage({path:urlHandler.getFileName($(this).attr("data-patternpartial"))},urlHandler.targetOrigin);$(this).parents(".sg-acc-panel").toggleClass("active");$(this).parents(".sg-acc-panel").siblings(".sg-acc-handle").toggleClass("active");return!1});$("#sg-vp-wrap").click(function(e){closePanels()});window.addEventListener("message",receiveIframeMessage,!1);