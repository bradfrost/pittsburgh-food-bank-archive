/*!
 * Annotations Support for the Viewer - v0.3
 *
 * Copyright (c) 2013 Brad Frost, http://bradfrostweb.com & Dave Olsen, http://dmolsen.com
 * Licensed under the MIT license
 *
 */var annotationsViewer={commentsActive:!1,sw:document.documentElement.clientWidth,breakpoint:650,onReady:function(){$("body").addClass("comments-ready");$("#sg-t-annotations").click(function(e){e.preventDefault();annotationsViewer.toggleComments();annotationsViewer.commentContainerInit()})},toggleComments:function(){var e=window.location.protocol=="file:"?"*":window.location.protocol+"//"+window.location.host;$("#sg-t-annotations").toggleClass("active");if(!annotationsViewer.commentsActive){annotationsViewer.commentsActive=!0;document.getElementById("sg-viewport").contentWindow.postMessage({commentToggle:"on"},e)}else{annotationsViewer.commentsActive=!1;document.getElementById("sg-viewport").contentWindow.postMessage({commentToggle:"off"},e);annotationsViewer.slideComment(999)}},commentContainerInit:function(){document.getElementById("sg-annotation-container")==undefined&&$('<div id="sg-annotation-container" style="display: none;"></div>').html('<a href="#" id="sg-annotation-close-btn">Close</a><h2 id="sg-annotation-title">Annotation Title</h2><div id="sg-annotation-text">Here is some comment text</div>').appendTo("body").css("bottom",-$(document).outerHeight());annotationsViewer.sw<annotationsViewer.breakpoint?$("#sg-annotation-container").hide():$("#sg-annotation-container").show();$("body").delegate("#sg-annotation-close-btn","click",function(e){annotationsViewer.slideComment($("#sg-annotation-containers").outerHeight());return!1})},slideComment:function(e){$("#sg-annotation-container").show();if(annotationsViewer.sw>annotationsViewer.breakpoint)$("#sg-annotation-container").css("bottom",-e);else{var t=$("#sg-annotation-container").offset().top;$("html,body").animate({scrollTop:t},500)}},updateComment:function(e,t,n){var r=$("#sg-annotation-container"),i=$("#sg-annotation-title"),s=$("#sg-annotation-text");i.text(t);s.html(n);annotationsViewer.slideComment(0)},receiveIframeMessage:function(e){if(window.location.protocol!="file:"&&e.origin!==window.location.protocol+"//"+window.location.host)return;e.data.commentOverlay!=undefined&&(e.data.commentOverlay=="on"?annotationsViewer.updateComment(e.data.el,e.data.title,e.data.comment):annotationsViewer.slideComment($("#sg-annotation-container").outerHeight()))}};$(document).ready(function(){annotationsViewer.onReady()});window.addEventListener("message",annotationsViewer.receiveIframeMessage,!1);$("#sg-viewport").load(function(){if(annotationsViewer.commentsActive){var e=window.location.protocol=="file:"?"*":window.location.protocol+"//"+window.location.host;document.getElementById("sg-viewport").contentWindow.postMessage({commentToggle:"on"},e)}});$("#sg-view li a").click(function(){$(this).parent().parent().removeClass("active");$(this).parent().parent().parent().parent().removeClass("active")});