(function(e){function p(){g();b();S(N(r,500))}function d(){g();b();S(N(500,800))}function v(){g();b();S(N(800,1200))}function m(){S(N(r,t))}function g(){c=!1;clearInterval(l);l=!1}function y(){c=!0;l=setInterval(m,800)}function b(){var e=o.width();h=!1;o.removeClass("hay-mode");$("#sg-gen-container").removeClass("hay-mode");S(Math.floor(e))}function w(){h=!0;$("#sg-gen-container").removeClass("vp-animate").width(r+s);o.removeClass("vp-animate").width(r);var e=window.setTimeout(function(){$("#sg-gen-container").addClass("hay-mode").width(i+s);o.addClass("hay-mode").width(i);setInterval(function(){var e=o.width();T(e)},100)},200)}function S(e,t){var n;e>i?n=i:e<r?n=r:n=e;t===!1?$("#sg-gen-container,#sg-viewport").removeClass("vp-animate"):$("#sg-gen-container,#sg-viewport").addClass("vp-animate");$("#sg-gen-container").width(n+s);o.width(n);var u=window.location.protocol==="file:"?"*":window.location.protocol+"//"+window.location.host,a=JSON.stringify({resize:"true"});document.getElementById("sg-viewport").contentWindow.postMessage(a,u);T(n);x(n)}function x(e){DataSaver.findValue("vpWidth")?DataSaver.updateValue("vpWidth",e):DataSaver.addValue("vpWidth",e)}function T(e,t,n){var r,i;if(t==="em"){r=e;i=Math.floor(e*f)}else{i=e;r=e/f}if(n==="updatePxInput")u.val(i);else if(n==="updateEmInput")a.val(r.toFixed(2));else{a.val(r.toFixed(2));u.val(i)}}function N(e,t){return Math.floor(Math.random()*(t-e)+e)}function C(e){$("#sg-viewport").width(e);$("#sg-gen-container").width(e*1+14);T(e)}function H(){$(".sg-nav-container, .sg-nav-toggle, .sg-acc-handle, .sg-acc-panel").removeClass("active");patternFinder.closeFinder()}function j(e){var t=typeof e.data!="string"?e.data:JSON.parse(e.data);if(window.location.protocol!=="file:"&&e.origin!==window.location.protocol+"//"+window.location.host)return;if(t.bodyclick!==undefined)H();else if(t.patternpartial!==undefined){if(!urlHandler.skipBack){(history.state===undefined||history.state===null||history.state.pattern!==t.patternpartial)&&urlHandler.pushPattern(t.patternpartial,t.path);if(wsnConnected){var n=urlHandler.getFileName(t.patternpartial);wsn.send('{"url": "'+n+'", "patternpartial": "'+e.data.patternpartial+'" }')}}urlHandler.skipBack=!1}else if(t.keyPress!==undefined){if(t.keyPress=="ctrl+shift+s")p();else if(t.keyPress=="ctrl+shift+m")d();else if(t.keyPress=="ctrl+shift+l")v();else if(t.keyPress=="ctrl+shift+d")c?g():y();else if(t.keyPress=="ctrl+shift+h")h?b():w();else if(t.keyPress=="ctrl+shift+0")S(320,!0);else if(found=t.keyPress.match(/ctrl\+shift\+([1-9])/)){var r=E[found[1]-1],i=r.indexOf("px")!==-1?"px":"em";r=r.replace(i,"");var s=i==="px"?r*1:r*f;S(s,!0)}return!1}}var t=document.body.clientWidth,n=document.body.clientHeight,r=240,i=2600,s=14,o=$("#sg-viewport"),u=$(".sg-size-px"),a=$(".sg-size-em"),f=parseInt($("body").css("font-size")),l=!1,c=!1,h=!1;$(e).resize(function(){t=document.body.clientWidth;n=document.body.clientHeight});$(".sg-acc-handle").on("click",function(e){e.preventDefault();var t=$(this),n=t.next(".sg-acc-panel"),r=t.parent().parent().hasClass("sg-acc-panel");if(!r){$(".sg-acc-handle").not(t).removeClass("active");$(".sg-acc-panel").not(n).removeClass("active")}t.toggleClass("active");n.toggleClass("active")});$(".sg-nav-toggle").on("click",function(e){e.preventDefault();$(".sg-nav-container").toggleClass("active")});$("#sg-t-toggle").on("click",function(e){e.preventDefault();$(this).parents("ul").toggleClass("active")});$("#sg-size-toggle").on("click",function(e){e.preventDefault();$(this).parents("ul").toggleClass("active")});$(".sg-size[data-size]").on("click",function(e){e.preventDefault();g();b();var t=$(this).attr("data-size");t.indexOf("px")>-1&&(f=1);t=t.replace(/[^\d.-]/g,"");S(Math.floor(t*f))});$("#sg-size-s").on("click",function(e){e.preventDefault();p()});jwerty.key("ctrl+shift+s",function(e){p();return!1});$("#sg-size-m").on("click",function(e){e.preventDefault();d()});jwerty.key("ctrl+shift+m",function(e){v();return!1});$("#sg-size-l").on("click",function(e){e.preventDefault();v()});jwerty.key("ctrl+shift+l",function(e){v();return!1});$("#sg-size-full").on("click",function(e){e.preventDefault();g();b();S(t)});$("#sg-size-random").on("click",function(e){e.preventDefault();g();b();S(N(r,t))});$("#sg-size-disco").on("click",function(e){e.preventDefault();b();c?g():y()});jwerty.key("ctrl+shift+d",function(e){c?g():y();return!1});$("#sg-size-hay").on("click",function(e){e.preventDefault();g();h?b():w()});jwerty.key("ctrl+shift+h",function(e){h?b():w()});u.on("keydown",function(e){var t=Math.floor($(this).val());if(e.keyCode===38){t++;S(t,!1)}else if(e.keyCode===40){t--;S(t,!1)}else if(e.keyCode===13){e.preventDefault();S(t);$(this).blur()}});u.on("keyup",function(){var e=Math.floor($(this).val());T(e,"px","updateEmInput")});a.on("keydown",function(e){var t=parseFloat($(this).val());if(e.keyCode===38){t++;S(Math.floor(t*f),!1)}else if(e.keyCode===40){t--;S(Math.floor(t*f),!1)}else if(e.keyCode===13){e.preventDefault();S(Math.floor(t*f))}});a.on("keyup",function(){var e=parseFloat($(this).val());T(e,"em","updatePxInput")});jwerty.key("ctrl+shift+0",function(e){e.preventDefault();S(320,!0);return!1});var E=[];$("#sg-mq a").each(function(e){E.push($(this).html());$(this).on("click",function(e,t){return function(e){e.preventDefault();var n=$(t).html(),r=n.indexOf("px")!==-1?"px":"em";n=n.replace(r,"");var i=r==="px"?n*1:n*f;S(i,!0)}}(e,this));jwerty.key("ctrl+shift+"+(e+1),function(e){return function(t){var n=$(e).html(),r=n.indexOf("px")!==-1?"px":"em";n=n.replace(r,"");var i=r==="px"?n*1:n*f;S(i,!0);return!1}}(this))});$("#sg-gen-container").on("transitionend webkitTransitionEnd",function(e){var t=window.location.protocol==="file:"?"*":window.location.protocol+"//"+window.location.host,n=JSON.stringify({resize:"true"});document.getElementById("sg-viewport").contentWindow.postMessage(n,t)});$("#sg-gen-container").on("touchstart",function(e){});$("#sg-rightpull").mousedown(function(e){var t=e.clientX,n=o.width();$("#sg-cover").css("display","block");$("#sg-cover").mousemove(function(e){var i;i=t>e.clientX?n-(t-e.clientX):n+(e.clientX-t);if(i>r){DataSaver.findValue("vpWidth")?DataSaver.updateValue("vpWidth",i):DataSaver.addValue("vpWidth",i);S(i,!1)}});return!1});$("body").mouseup(function(){$("#sg-cover").unbind("mousemove");$("#sg-cover").css("display","none")});var k=$("#sg-viewport").width();$("#sg-gen-container").width(k);var L=screen.width;window.orientation!==undefined&&(L=window.orientation==0?screen.width:screen.height);$(window).width()==L&&"ontouchstart"in document.documentElement&&$(window).width()<=1024?$("#sg-rightpull-container").width(0):$("#sg-viewport").width(k-14);T($("#sg-viewport").width());var A=urlHandler.getRequestVars(),O=0,M=!0;if(A.h!==undefined||A.hay!==undefined)w();else if(A.d!==undefined||A.disco!==undefined)y();else if(A.w!==undefined||A.width!==undefined){O=A.w!==undefined?A.w:A.width;O=O.indexOf("em")!==-1?Math.floor(Math.floor(O.replace("em",""))*f):Math.floor(O.replace("px",""));DataSaver.updateValue("vpWidth",O);C(O)}else M&&(O=DataSaver.findValue("vpWidth"))&&C(O);var _="all",D="",P=window.location.protocol+"//"+window.location.host+window.location.pathname.replace("index.html","")+"styleguide/html/styleguide.html";if(A.p!==undefined||A.pattern!==undefined){_=A.p!==undefined?A.p:A.pattern;D=urlHandler.getFileName(_);P=D!==""?window.location.protocol+"//"+window.location.host+window.location.pathname.replace("index.html","")+D:P}if(_!=="all"){document.getElementById("title").innerHTML="Pattern Lab - "+_;history.replaceState({pattern:_},null,null)}document.getElementById("sg-raw")!=undefined&&document.getElementById("sg-raw").setAttribute("href",urlHandler.getFileName(_));urlHandler.skipBack=!0;document.getElementById("sg-viewport").contentWindow.location.replace(P);$(".sg-nav a").not(".sg-acc-handle").on("click",function(e){e.preventDefault();var t=JSON.stringify({path:urlHandler.getFileName($(this).attr("data-patternpartial"))});document.getElementById("sg-viewport").contentWindow.postMessage(t,urlHandler.targetOrigin);H()});$("#sg-vp-wrap").click(function(){H()});if(window.orientation!==undefined){var B=window.orientation;window.addEventListener("orientationchange",function(){if(window.orientation!=B){$("#sg-gen-container").width($(window).width());$("#sg-viewport").width($(window).width());T($(window).width());B=window.orientation}},!1)}window.addEventListener("message",j,!1);$(".sg-tools").click(function(){if(qrCodeGenerator.lastGenerated==""||qrCodeGenerator.lastGenerated!=window.location.search){qrCodeGenerator.getQRCode();qrCodeGenerator.lastGenerated=window.location.search}})})(this);